{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\r\nimport \"izitoast/dist/css/iziToast.min.css\";\r\nimport SimpleLightbox from \"simplelightbox\";\r\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\r\nimport axios from \"axios\";\r\n\r\nconst API_KEY = \"48313222-9e5699caa5ef89de4c12bc71b\";\r\nconst BASE_URL = \"https://pixabay.com/api/\";\r\n\r\nconst form = document.querySelector(\"#search-form\");\r\nconst gallery = document.querySelector(\"#gallery\");\r\nconst loader = document.querySelector(\"#loader\");\r\nconst pagination = document.querySelector(\"#pagination\");\r\n\r\nlet currentPage = 1; \r\nlet query = \"\"; \r\nlet totalPages = 0; \r\n\r\nlet lightbox = new SimpleLightbox(\".gallery a\", {\r\n  captionsData: \"alt\",\r\n  captionDelay: 250,\r\n});\r\n\r\nform.addEventListener(\"submit\", (event) => {\r\n  event.preventDefault();\r\n  query = event.target.searchQuery.value.trim();\r\n\r\n  if (!query) {\r\n    iziToast.error({\r\n      title: \"Error\",\r\n      message: \"Please enter a search query!\",\r\n    });\r\n    return;\r\n  }\r\n\r\n  currentPage = 1; \r\n  fetchImages(query, currentPage);\r\n});\r\n\r\nasync function fetchImages(query, page) {\r\n  showLoader();\r\n\r\n  try {\r\n    const response = await axios.get(BASE_URL, {\r\n      params: {\r\n        key: API_KEY,\r\n        q: query,\r\n        image_type: \"photo\",\r\n        orientation: \"horizontal\",\r\n        safesearch: true,\r\n        per_page: 15, \r\n        page: page, \r\n      },\r\n    });\r\n\r\n    const data = response.data;\r\n\r\n    if (data.hits.length === 0) {\r\n      iziToast.warning({\r\n        title: \"No Results\",\r\n        message: \"Sorry, there are no images matching your search query. Please try again!\",\r\n      });\r\n      gallery.innerHTML = \"\";\r\n      pagination.innerHTML = \"\"; \r\n      return;\r\n    }\r\n\r\n    totalPages = Math.ceil(data.totalHits / 10);\r\n    renderGallery(data.hits);\r\n    renderPagination();\r\n  } catch (error) {\r\n    iziToast.error({\r\n      title: \"Error\",\r\n      message: \"Failed to fetch images. Please try again later.\",\r\n    });\r\n  } finally {\r\n    hideLoader();\r\n  }\r\n}\r\n\r\nfunction renderGallery(images) {\r\n  gallery.innerHTML = \"\";\r\n\r\n  const markup = images\r\n    .map(\r\n      (image) => `\r\n      <a href=\"${image.largeImageURL}\" class=\"gallery-item\">\r\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\r\n        <div class=\"gallery-info\">\r\n          <div>\r\n            <p><b>Likes:</b> ${image.likes}</p>\r\n            <p><b>Views:</b> ${image.views}</p>\r\n          </div>\r\n          <div>\r\n            <p><b>Comments:</b> ${image.comments}</p>\r\n            <p><b>Downloads:</b> ${image.downloads}</p>\r\n          </div>\r\n        </div>\r\n      </a>\r\n    `\r\n    )\r\n    .join(\"\");\r\n\r\n  gallery.innerHTML = markup;\r\n\r\n  lightbox.refresh();\r\n}\r\n\r\nfunction renderPagination() {\r\n  pagination.innerHTML = \"\";\r\n\r\n  const prevButton = `\r\n    <button class=\"btn-prev\" ${currentPage === 1 ? \"disabled\" : \"\"}>Previous</button>\r\n  `;\r\n  const nextButton = `\r\n    <button class=\"btn-next\" ${currentPage === totalPages ? \"disabled\" : \"\"}>Next</button>\r\n  `;\r\n\r\n  pagination.innerHTML = `${prevButton} <span>Page ${currentPage} of ${totalPages}</span> ${nextButton}`;\r\n\r\n  const prevBtn = document.querySelector(\".btn-prev\");\r\n  const nextBtn = document.querySelector(\".btn-next\");\r\n\r\n  if (prevBtn) {\r\n    prevBtn.addEventListener(\"click\", () => {\r\n      if (currentPage > 1) {\r\n        currentPage--;\r\n        fetchImages(query, currentPage);\r\n      }\r\n    });\r\n  }\r\n\r\n  if (nextBtn) {\r\n    nextBtn.addEventListener(\"click\", () => {\r\n      if (currentPage < totalPages) {\r\n        currentPage++;\r\n        fetchImages(query, currentPage);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction showLoader() {\r\n  loader.classList.remove(\"hidden\");\r\n}\r\n\r\nfunction hideLoader() {\r\n  loader.classList.add(\"hidden\");\r\n}\r\n\r\n\r\n"],"names":["API_KEY","BASE_URL","form","gallery","loader","pagination","currentPage","query","totalPages","lightbox","SimpleLightbox","event","iziToast","fetchImages","page","showLoader","data","axios","renderGallery","renderPagination","hideLoader","images","markup","image","prevButton","nextButton","prevBtn","nextBtn"],"mappings":"owBAMA,MAAMA,EAAU,qCACVC,EAAW,2BAEXC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAa,SAAS,cAAc,aAAa,EAEvD,IAAIC,EAAc,EACdC,EAAQ,GACRC,EAAa,EAEbC,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,GAChB,CAAC,EAEDR,EAAK,iBAAiB,SAAWS,GAAU,CAIzC,GAHAA,EAAM,eAAc,EACpBJ,EAAQI,EAAM,OAAO,YAAY,MAAM,KAAI,EAEvC,CAACJ,EAAO,CACVK,EAAS,MAAM,CACb,MAAO,QACP,QAAS,8BACf,CAAK,EACD,MACD,CAEDN,EAAc,EACdO,EAAYN,EAAOD,CAAW,CAChC,CAAC,EAED,eAAeO,EAAYN,EAAOO,EAAM,CACtCC,IAEA,GAAI,CAaF,MAAMC,GAZW,MAAMC,EAAM,IAAIhB,EAAU,CACzC,OAAQ,CACN,IAAKD,EACL,EAAGO,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAMO,CACP,CACP,CAAK,GAEqB,KAEtB,GAAIE,EAAK,KAAK,SAAW,EAAG,CAC1BJ,EAAS,QAAQ,CACf,MAAO,aACP,QAAS,0EACjB,CAAO,EACDT,EAAQ,UAAY,GACpBE,EAAW,UAAY,GACvB,MACD,CAEDG,EAAa,KAAK,KAAKQ,EAAK,UAAY,EAAE,EAC1CE,EAAcF,EAAK,IAAI,EACvBG,GACD,MAAe,CACdP,EAAS,MAAM,CACb,MAAO,QACP,QAAS,iDACf,CAAK,CACL,QAAY,CACRQ,GACD,CACH,CAEA,SAASF,EAAcG,EAAQ,CAC7BlB,EAAQ,UAAY,GAEpB,MAAMmB,EAASD,EACZ,IACEE,GAAU;AAAA,iBACAA,EAAM,aAAa;AAAA,oBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,+BAG3BA,EAAM,KAAK;AAAA,+BACXA,EAAM,KAAK;AAAA;AAAA;AAAA,kCAGRA,EAAM,QAAQ;AAAA,mCACbA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,KAK7C,EACA,KAAK,EAAE,EAEVpB,EAAQ,UAAYmB,EAEpBb,EAAS,QAAO,CAClB,CAEA,SAASU,GAAmB,CAC1Bd,EAAW,UAAY,GAEvB,MAAMmB,EAAa;AAAA,+BACUlB,IAAgB,EAAI,WAAa,EAAE;AAAA,IAE1DmB,EAAa;AAAA,+BACUnB,IAAgBE,EAAa,WAAa,EAAE;AAAA,IAGzEH,EAAW,UAAY,GAAGmB,CAAU,eAAelB,CAAW,OAAOE,CAAU,WAAWiB,CAAU,GAEpG,MAAMC,EAAU,SAAS,cAAc,WAAW,EAC5CC,EAAU,SAAS,cAAc,WAAW,EAE9CD,GACFA,EAAQ,iBAAiB,QAAS,IAAM,CAClCpB,EAAc,IAChBA,IACAO,EAAYN,EAAOD,CAAW,EAEtC,CAAK,EAGCqB,GACFA,EAAQ,iBAAiB,QAAS,IAAM,CAClCrB,EAAcE,IAChBF,IACAO,EAAYN,EAAOD,CAAW,EAEtC,CAAK,CAEL,CAEA,SAASS,GAAa,CACpBX,EAAO,UAAU,OAAO,QAAQ,CAClC,CAEA,SAASgB,GAAa,CACpBhB,EAAO,UAAU,IAAI,QAAQ,CAC/B"}