{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export function imagesCardTemplate(images) {\n  return images\n    .map(\n      (image) => `\n      <a href=\"${image.largeImageURL}\" class=\"gallery-item\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n        <div class=\"gallery-info\">\n          <div>\n            <p><b>Likes:</b> ${image.likes}</p>\n            <p><b>Views:</b> ${image.views}</p>\n          </div>\n          <div>\n            <p><b>Comments:</b> ${image.comments}</p>\n            <p><b>Downloads:</b> ${image.downloads}</p>\n          </div>\n        </div>\n      </a>\n    `\n    )\n    .join(\"\");\n}\n","import axios from \"axios\";\n\nconst API_KEY = \"48313222-9e5699caa5ef89de4c12bc71b\";\nconst BASE_URL = \"https://pixabay.com/api/\";\n\nexport async function fetchSearch(query, page) {\n  const response = await axios.get(BASE_URL, {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: \"photo\",\n      orientation: \"horizontal\",\n      safesearch: true,\n      per_page: 15,\n      page: page,\n    },\n  });\n  return response.data;\n}\n","import iziToast from \"izitoast\";\r\nimport \"izitoast/dist/css/iziToast.min.css\";\r\nimport SimpleLightbox from \"simplelightbox\";\r\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\r\nimport { imagesCardTemplate } from \"./js/render-functions\";\r\nimport { fetchSearch } from \"./js/pixabay-api\";\r\n\r\nconst form = document.querySelector(\"#search-form\");\r\nconst gallery = document.querySelector(\"#gallery\");\r\nconst loader = document.querySelector(\"#loader\");\r\nconst pagination = document.querySelector(\"#pagination\");\r\nconst prevPageButton = document.querySelector(\"#prev-page\");\r\nconst nextPageButton = document.querySelector(\"#next-page\");\r\nconst pageInfo = document.querySelector(\"#page-info\");\r\n\r\nlet currentPage = 1;\r\nlet query = \"\";\r\nlet totalPages = 0;\r\nlet isLoading = false;\r\n\r\nlet lightbox = new SimpleLightbox(\".gallery a\", {\r\n  captionsData: \"alt\",\r\n  captionDelay: 250,\r\n});\r\n\r\nform.addEventListener(\"submit\", async (event) => {\r\n  event.preventDefault();\r\n  query = event.target.searchQuery.value.trim();\r\n\r\n  if (!query) {\r\n    iziToast.error({\r\n      title: \"Error\",\r\n      message: \"Please enter a search query!\",\r\n    });\r\n    return;\r\n  }\r\n\r\n  currentPage = 1;\r\n  totalPages = 0;\r\n  gallery.innerHTML = \"\";\r\n  pagination.classList.add(\"hidden\");\r\n  await fetchAndRenderImages(query, currentPage);\r\n});\r\n\r\nasync function fetchAndRenderImages(query, page) {\r\n  if (isLoading) return;\r\n  isLoading = true;\r\n  showLoader();\r\n\r\n  try {\r\n    const data = await fetchSearch(query, page);\r\n\r\n    if (data.hits.length === 0 && page === 1) {\r\n      iziToast.warning({\r\n        title: \"No Results\",\r\n        message: \"Sorry, there are no images matching your search query. Please try again!\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    totalPages = Math.ceil(data.totalHits / 15);\r\n    renderGallery(data.hits);\r\n\r\n    if (page > 1) {\r\n      smoothScrollToNewContent(); \r\n    }\r\n\r\n    updatePagination();\r\n  } catch (error) {\r\n    iziToast.error({\r\n      title: \"Error\",\r\n      message: \"Failed to fetch images. Please try again later.\",\r\n    });\r\n  } finally {\r\n    hideLoader();\r\n    isLoading = false;\r\n  }\r\n}\r\n\r\nfunction renderGallery(images) {\r\n  const markup = imagesCardTemplate(images);\r\n  gallery.innerHTML += markup; \r\n  lightbox.refresh();\r\n}\r\n\r\nfunction smoothScrollToNewContent() {\r\n  const cardHeight = document.querySelector(\".gallery a\").getBoundingClientRect().height;\r\n\r\n  window.scrollBy({\r\n    top: cardHeight * 2,\r\n    behavior: \"smooth\",\r\n  });\r\n}\r\n\r\nfunction updatePagination() {\r\n  pagination.classList.remove(\"hidden\");\r\n\r\n  prevPageButton.disabled = currentPage === 1;\r\n  nextPageButton.disabled = currentPage === totalPages;\r\n\r\n  pageInfo.textContent = `Page ${currentPage} of ${totalPages}`;\r\n}\r\n\r\nprevPageButton.addEventListener(\"click\", async () => {\r\n  if (currentPage > 1) {\r\n    currentPage--;\r\n    await fetchAndRenderImages(query, currentPage);\r\n  }\r\n});\r\n\r\nnextPageButton.addEventListener(\"click\", async () => {\r\n  if (currentPage < totalPages) {\r\n    currentPage++;\r\n    await fetchAndRenderImages(query, currentPage);\r\n  }\r\n});\r\n\r\nfunction showLoader() {\r\n  loader.classList.remove(\"hidden\");\r\n}\r\n\r\nfunction hideLoader() {\r\n  loader.classList.add(\"hidden\");\r\n}\r\n"],"names":["imagesCardTemplate","images","image","API_KEY","BASE_URL","fetchSearch","query","page","axios","form","gallery","loader","pagination","prevPageButton","nextPageButton","pageInfo","currentPage","totalPages","isLoading","lightbox","SimpleLightbox","event","iziToast","fetchAndRenderImages","showLoader","data","renderGallery","smoothScrollToNewContent","updatePagination","hideLoader","markup","cardHeight"],"mappings":"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"}